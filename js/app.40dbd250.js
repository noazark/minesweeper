(function(t){function e(e){for(var i,a,o=e[0],u=e[1],c=e[2],h=0,m=[];h<o.length;h++)a=o[h],r[a]&&m.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="https://noazark.github.io/minesweeper/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},2018:function(t,e,n){"use strict";var i=n("b638"),r=n.n(i);r.a},"2a4f":function(t,e,n){},"2cb8":function(t,e,n){"use strict";var i=n("be10"),r=n.n(i);r.a},"4fdd":function(t,e,n){"use strict";var i=n("2a4f"),r=n.n(i);r.a},"5e25":function(t,e,n){"use strict";var i=n("c6f6"),r=n.n(i);r.a},"9e9d":function(t,e,n){"use strict";var i=n("b9eb"),r=n.n(i);r.a},b638:function(t,e,n){},b9eb:function(t,e,n){},be10:function(t,e,n){},c6f6:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i,r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.gameMode,{tag:"div"})},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"classic-app"},[n("div",{staticClass:"timer"},[n("span",{staticClass:"right"},[t._v(t._s(t.flagCount))]),t._v("\n    :\n    "),n("timer",{staticClass:"left",attrs:{time:t.time}}),t._v("\n    :\n    "),n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.restart(e)}}},[t._v("restart")])],1),n("div",{staticClass:"map",style:{"--columns":t.gameSize[0]}},[t._l(t.times(t.matrix.w*t.matrix.h,Number),function(e,i){return[n("tile",{key:i,attrs:{isBomb:t.isCell(t.matrix,i,t.PROPS.BOMB),isMasked:t.isCell(t.matrix,i,t.PROPS.MASK),isFlagged:t.isCell(t.matrix,i,t.PROPS.FLAG),bombCount:t.countNeighbors(t.matrix,i,t.PROPS.BOMB)},on:{flag:function(e){return t.flag(i)},unmaskAroundFlags:function(e){return t.unmaskAroundFlags(i)},unmask:function(e){return t.unmask(i)}}})]})],2)])},u=[],c=(n("ac6a"),n("2ef0")),l=n("75fc"),h=n("768b"),m=(n("c5f6"),n("bd86")),f=(n("9c29"),32);function d(t,e,n){var r=p(t,e);if(null==n&&(n=Math.floor(.2*r.size)),r.size<=n||n<0)throw new Error("invalid map");var s=v(r,n);return s.forEach(function(t){y(r,t,i.BOMB,!0)}),r}function p(t,e){for(var n,r=t*e,s=(n={},Object(m["a"])(n,i.BOMB,new Uint32Array(Math.ceil(r/f))),Object(m["a"])(n,i.MASK,new Uint32Array(Math.ceil(r/f))),Object(m["a"])(n,i.FLAG,new Uint32Array(Math.ceil(r/f))),Object(m["a"])(n,"w",t),Object(m["a"])(n,"h",e),Object(m["a"])(n,"size",r),n),a=0;a<r;a++)g(s[i.MASK],a),x(s[i.BOMB],a),x(s[i.FLAG],a);return s}function v(t,e){var n=[];return Object(c["times"])(e,function(){var e;do{e=Math.floor(Math.random()*t.size)}while(n.indexOf(e)>=0);n.push(e)}),n}function b(t,e){var n=Math.floor(e/f),i=e%f;return(t[n]>>i)%2!=0}function g(t,e){var n=Math.floor(e/f),i=e%f;return t[n]=t[n]|1<<i}function x(t,e){var n=Math.floor(e/f),i=e%f;return t[n]=t[n]&~(1<<i)}function w(t,e,n){return null!=n?n?g(t,e):x(t,e):b(t,e)?x(t,e):g(t,e)}function y(t,e,n,i){return w(t[n],e,i),b(t[n],e)}function k(t,e){return b(t[i.MASK],e)&&w(t[i.FLAG],e),b(t[i.FLAG],e)}function O(t,e,n){return b(t[n],e)}function M(t,e){var n=t.w,i=t.h,r=e.r,s=e.c;return r>=0&&s>=0&&r<i&&s<n}function B(t){return A(t)&&!Object(c["times"])(t.size,Number).some(function(e){return C(t,e)||_(t,e)})}function A(t){return!Object(c["times"])(t.size,Number).some(function(e){return S(t,e)})}function S(t,e){return O(t,e,i.BOMB)&&!O(t,e,i.MASK)}function C(t,e){return!O(t,e,i.BOMB)&&O(t,e,i.FLAG)}function _(t,e){return!O(t,e,i.BOMB)&&O(t,e,i.MASK)}function j(t,e){return Object(c["times"])(t.size,Number).reduce(function(n,i){return O(t,i,e)&&n.push(i),n},[])}function P(t){return j(t,i.BOMB)}function F(t){return j(t,i.FLAG).length}function z(t,e){if(e>t.size-1)throw new Error("offset is out of range");var n=Math.floor(e/t.w),i=e%t.w;return{r:n,c:i}}function E(t,e){return e.r*t.w+e.c}function T(t,e){var n=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],i=z(t,e);return n.reduce(function(e,n){var r=Object(h["a"])(n,2),s=r[0],a=r[1],o={r:i.r+s,c:i.c+a};return M(t,o)&&(e=[].concat(Object(l["a"])(e),[E(t,o)])),e},[])}(function(t){t["BOMB"]="bomb",t["FLAG"]="flag",t["MASK"]="mask"})(i||(i={}));var L=function(t,e){return t+e};function K(t,e,n){return T(t,e).map(function(e){return O(t,e,n)?1:0}).reduce(L,0)}function G(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return O(t,e,i.FLAG)||n.push(e),O(t,e,i.BOMB)||K(t,e,i.BOMB)>0?n:n.concat($(t,e,n))}function U(t,e){return!O(t,e,i.MASK)&&K(t,e,i.FLAG)>=K(t,e,i.BOMB)?$(t,e,[],!0):[]}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return O(t,e,i.FLAG)?[]:T(t,e).reduce(function(e,s){var a=n.concat(e).some(function(t){return s==t});if(O(t,s,i.FLAG)||a)return e;var o=K(t,s,i.BOMB)>0;if(!o)return Object(c["difference"])(G(t,s,n.concat(e)),n);var u=!O(t,s,i.BOMB);return r||u?[].concat(Object(l["a"])(e),[s]):e},[])}function N(t,e){return!(K(t,e,i.BOMB)>0)&&!O(t,e,i.BOMB)}var D=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"tile",class:(t={},t["val-"+e.bombCount]=!e.isMasked,t.debug=e.debug&&!e.isMasked,t.bomb=e.isBomb,t.masked=e.isMasked&&!e.debug,t.unmasked=!e.isMasked||e.debug,t.flagged=e.isFlagged,t),on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mouseup:function(t){return e.unmask(t)},mousedown:function(t){return e.track(t)}}},[e.debug||!e.isMasked&&!e.isBomb&&e.bombCount?[e._v("\n    "+e._s(e.bombCount)+"\n  ")]:e._e()],2)},I=[],R={props:["isBomb","isMasked","isFlagged","bombCount"],data:function(){return{debug:!1}},methods:{track:function(t){t.preventDefault(),t.stopPropagation(),this.evt=t},unmask:function(t){t.preventDefault(),t.stopPropagation(),null==this.evt&&(this.evt=t),2===this.evt.buttons?this.$emit("flag"):3===this.evt.buttons||1===this.evt.buttons&&this.evt.metaKey?this.$emit("unmaskAroundFlags"):1===this.evt.buttons&&this.$emit("unmask"),this.evt=void 0}}},H=R,J=(n("5e25"),n("2877")),Y=Object(J["a"])(H,D,I,!1,null,"b79d7842",null),q=Y.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("\n  "+t._s(t.displayTime)+"\n")])},Q=[],V={props:["time"],computed:{displayTime:function(){return(this.time/1e3).toFixed()}}},X=V,Z=Object(J["a"])(X,W,Q,!1,null,null,null),tt=Z.exports,et={components:{Tile:q,Timer:tt},data:function(){return{PROPS:i,gameSize:[30,16],bombCount:99,matrix:[],playing:!0,startedAt:0,time:0}},mounted:function(){this.matrix=d(this.gameSize[0],this.gameSize[1],this.bombCount)},watch:{startedAt:function(){var t=this,e=function e(){window.requestIdleCallback(function(){t.playing&&(t.time=Date.now()-t.startedAt,e())})};e()},matrix:{handler:function(){var t=this;if((this.playing&&B(this.matrix)||!A(this.matrix))&&this.stop(),!B(this.matrix)&&!A(this.matrix)){var e=P(this.matrix);e.forEach(function(e){return O(t.matrix,e).isMasked=!1})}},deep:!0}},computed:{flagCount:function(){return this.bombCount-F(this.matrix)}},methods:{times:c["times"],isCell:O,countNeighbors:K,start:function(t){while(!N(this.matrix,t))this.matrix=d(this.gameSize[0],this.gameSize[1],this.bombCount);this.playing=!0,this.startedAt=Date.now()},restart:function(){this.matrix=d(this.gameSize[0],this.gameSize[1],this.bombCount),this.playing=!1,this.startedAt=0,this.time=0},stop:function(){this.playing=!1},flag:function(t){A(this.matrix)&&(this.startedAt||this.start(t),k(this.matrix,t))},unmaskAroundFlags:function(t){var e=this;if(A(this.matrix)){var n=U(this.matrix,t);n.forEach(function(t){return O(e.matrix,t,i.MASK)}),n.forEach(function(t){return e.doUnmask(t)})}},unmask:function(t){var e=this;if(A(this.matrix)){this.startedAt||this.start(t);var n=G(this.matrix,t);n.forEach(function(t){return e.doUnmask(t)})}},doUnmask:function(t){return y(this.matrix,t,i.MASK,!1),!0}}},nt=et,it=(n("4fdd"),Object(J["a"])(nt,o,u,!1,null,"ef8ba4d6",null)),rt=it.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"txt-app"},[n("code",{staticClass:"map",style:{"--columns":t.gameSize[0]}},[t._l(t.times(t.matrix.size,Number),function(e,i){return[n("tile",{key:i,attrs:{isBomb:t.isBomb(t.matrix,i),isMasked:t.isMasked(t.matrix,i),isFlagged:t.isFlagged(t.matrix,i),bombCount:t.neighboringBombs(t.matrix,i),isActive:t.cursor===i,isPreview:null!=t.preview&&t.preview===i}})]})],2),n("p",[n("terminal",{on:{input:this.playPreview,submit:this.play}})],1),n("code",{staticClass:"history"},[n("pre",{domProps:{innerHTML:t._s(t.output)}})])])},at=[],ot=n("aede"),ut=(n("4917"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  > "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.next,expression:"next"}],staticClass:"cli",attrs:{placeholder:"try, /howto",autofocus:""},domProps:{value:t.next},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.historyNext(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.historyPrev(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.submit(t.next))}],input:[function(e){e.target.composing||(t.next=e.target.value)},function(e){return t.input(e.target.value)}],blur:function(t){return t.target.focus()}}})])}),ct=[],lt={data:function(){return{next:"",commands:[],cursor:0,mem:void 0}},methods:{reset:function(){var t=this.cursor;null==!this.mem&&(this.mem=this.next),this.next=this.commands[t],null==this.next&&(this.next=this.mem)},historyPrev:function(){var t=this.cursor+1;t>this.commands.length-1?this.cursor=this.commands.length:this.cursor=t,this.reset()},historyNext:function(){var t=this.cursor-1;this.cursor=t<0?0:t,this.reset()},input:function(t){this.$emit("input",t)},submit:function(t){this.commands.push(t),this.cursor=this.commands.length,this.next="",this.$emit("submit",t)}}},ht=lt,mt=(n("2cb8"),Object(J["a"])(ht,ut,ct,!1,null,null,null)),ft=mt.exports,dt=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"tile",class:(t={},t["val-"+e.bombCount]=!e.isMasked,t.bomb=e.isBomb,t.masked=e.isMasked,t.unmasked=!e.isMasked,t.flagged=e.isFlagged,t.active=e.isActive,t.preview=e.isPreview,t),domProps:{innerHTML:e._s(e.display)}})},pt=[],vt={props:["isBomb","isMasked","isFlagged","bombCount","isActive","isPreview"],computed:{display:function(){return this.isFlagged?"x":this.isMasked?"o":this.isBomb?"*":this.bombCount>0?this.bombCount:this.isActive?"#":"."}}},bt=vt,gt=(n("9e9d"),Object(J["a"])(bt,dt,pt,!1,null,"5598ca8f",null)),xt=gt.exports,wt=n("eb29");function yt(){var t=Object(ot["a"])(['\n        Welcome!\n\n        This game is not timed, so have fun and explore. The goal is to\n        uncover all the bombs, "*", hidden underneith the masked tiles, "o".\n\n        There are currently '," bombs randomly placed underneith ","\n        tiles. You are welcome to change the size of the game by typing something like:\n\n          /reset 15 10 20\n\n        This will make the game 15 tiles wide, 10 tiles tall and have 20 hidden bombs.\n        You are scored by the number of moves it takes to unmask all the bombs. Lower\n        score is better! Now it's time to get started. Type '/help' for a list of\n        commands, explore them and have fun!\n\n        Oh... and if you think this game sounds a lot like another game you've played\n        before, you are correct."]);return yt=function(){return t},t}var kt={components:{Terminal:ft,Tile:xt},data:function(){return{cursor:0,preview:null,gameSize:[10,10],matrix:{},playing:!0,score:0,output:"",commands:[[/^m(?:ove)?\s*?(u(?:p)?|d(?:own)?|l(?:eft)?|r(?:ight)?)(?:\s*(\d+))?/i,"move","move right 5"],[/^f(?:lag)?\s*?(u(?:p)?|d(?:own)?|l(?:eft)?|r(?:ight)?)(?:\s*(\d+))?/i,"flag","flag down"],[/^s(weep)?/i,"sweep","sweep"],[/^\/reset(?: (\d+) (\d+)(?: (\d+))?)?$/,"restart","/reset 10 10 10"],[/^\/score/,"showScore","/score"],[/^\/flags/,"showFlagCount","/flags"],[/^\/clear/,"clear","/clear"],[/^\/help/,"help","/help"],[/^\/howto/,"howto","/howto"]]}},mounted:function(){this.restart()},watch:{score:{handler:function(){var t=this;if(B(this.matrix)?this.output="you win!\n\n/reset to play again":A(this.matrix)||(this.output="game over\n\n/reset to play again"),(this.playing&&B(this.matrix)||!A(this.matrix))&&this.stop(),!B(this.matrix)&&!A(this.matrix)){var e=P(this.matrix);e.forEach(function(e){return t.doUnmask(e)})}},deep:!0}},methods:{times:c["times"],offsetToPoint:z,neighboringBombs:function(t,e){return K(t,e,i.BOMB)},isBomb:function(t,e){return O(t,e,i.BOMB)},isMasked:function(t,e){return O(t,e,i.MASK)},isFlagged:function(t,e){return O(t,e,i.FLAG)},start:function(){this.playing=!0},restart:function(t,e,n,i){var r=this;e&&(this.gameSize[0]=parseInt(e)),n&&(this.gameSize[1]=parseInt(n)),i&&(i=parseInt(i)),this.cursor=0;do{this.matrix=d(this.gameSize[0],this.gameSize[1],i)}while(!N(this.matrix,this.cursor));var s=G(this.matrix,this.cursor);s.forEach(function(t){return r.doUnmask(t)}),this.score=0,this.playing=!1},stop:function(){this.playing=!1},play:function(t){var e=this,n="/"===t[0];if(this.preview=null,!n){if(B(this.matrix)||!A(this.matrix))return void(this.output="game is over, please '/reset'");this.playing||this.start()}var i=this.commands.some(function(i){var r=Object(h["a"])(i,2),s=r[0],a=r[1],o=t.match(s);return o&&(e.output=e[a].apply(e,Object(l["a"])(o)),n||e.score++),o});i||(this.output="unknown command")},playPreview:function(t){var e=this,n=this.commands.some(function(n){var i=Object(h["a"])(n,2),r=i[0],s=i[1],a=s+"Preview",o=t.match(r);return o&&e.hasOwnProperty(a)&&(e.output=e[a].apply(e,Object(l["a"])(o))),o});n||(this.preview=null)},move:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i=parseInt(i);var r=Object(c["times"])(i,function(){var t=z(n.matrix,n.cursor),i=t.r,r=t.c;if("up"!==e&&"u"!==e||(i-=1),"down"!==e&&"d"!==e||(i+=1),"left"!==e&&"l"!==e||(r-=1),"right"!==e&&"r"!==e||(r+=1),M(n.matrix,{r:i,c:r})){n.cursor=E(n.matrix,{r:i,c:r});var s=G(n.matrix,n.cursor).filter(n.doUnmask);return s.length}});return"".concat(r.reduce(function(t,e){return t+e})," cleared")},cmdPreview:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=parseInt(n);var i=z(this.matrix,this.cursor),r=i.r,s=i.c;"up"!==e&&"u"!==e||(r-=n),"down"!==e&&"d"!==e||(r+=n),"left"!==e&&"l"!==e||(s-=n),"right"!==e&&"r"!==e||(s+=n),M(this.matrix,{r:r,c:s})?this.preview=E(this.matrix,{r:r,c:s}):this.preview=null},movePreview:function(){this.cmdPreview.apply(this,arguments)},flagPreview:function(){this.cmdPreview.apply(this,arguments)},flag:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=parseInt(n);var i=z(this.matrix,this.cursor),r=i.r,s=i.c;"up"!==e&&"u"!==e||(r-=n),"down"!==e&&"d"!==e||(r+=n),"left"!==e&&"l"!==e||(s-=n),"right"!==e&&"r"!==e||(s+=n);var a={r:r,c:s},o=E(this.matrix,a);if(M(this.matrix,a))return k(this.matrix,o)?"OK":"Flag removed"},showScore:function(){return"".concat(this.score," (lower is better)")},showFlagCount:function(){return"".concat(F(this.matrix)," of ").concat(P(this.matrix).length)},sweep:function(){var t=U(this.matrix,this.cursor).filter(this.doUnmask);return"".concat(t.length," cleared")},help:function(){return this.commands.map(function(t){return t[2]}).join("\r\n")},howto:function(){return Object(wt["a"])(yt(),P(this.matrix).length,this.gameSize[0]*this.gameSize[1])},clear:function(){return""},doUnmask:function(t){return y(this.matrix,t,i.MASK,!1),!0}}},Ot=kt,Mt=(n("2018"),Object(J["a"])(Ot,st,at,!1,null,"3dcee26b",null)),Bt=Mt.exports,At={name:"app",components:{Classic:rt,Txt:Bt},data:function(){return{gameMode:"txt"}}},St=At,Ct=Object(J["a"])(St,s,a,!1,null,null,null),_t=Ct.exports;new r["a"]({el:"#app",render:function(t){return t(_t)}})}});
//# sourceMappingURL=app.40dbd250.js.map